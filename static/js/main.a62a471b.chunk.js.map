{"version":3,"sources":["hooks/useRememberedState.js","components/ConfigController/ConfigKeys.js","components/ConfigController/ConfigController.js","components/ConfigController/useAuth.js","components/ConfigController/useSelectedRepos.js","helpers/mapToGroups.js","Apollo.js","hooks/useTailwind.js","components/Layout.js","components/Layout.styles.js","hooks/queries/useUserRepos.js","components/RepoList.js","components/RepoList.styles.js","components/RepoPicker.js","components/RepoPicker.styles.js","components/TokenGate.js","components/TokenGate.styles.js","index.js","App.js"],"names":["loadState","key","initial","str","stored","localStorage","getItem","JSON","parse","saveState","value","setItem","obj","stringify","useRememberedState","name","useRef","useState","current","state","setState","useEffect","ConfigKeys","ConfigContext","createContext","useConfig","useContext","ConfigController","children","auth","token","setToken","useMemo","useAuth","selectedRepos","repos","setRepos","groupedRepos","keyGetter","repo","owner","login","reduce","acc","item","index","push","repoKeys","map","nameWithOwner","containsRepo","includes","addRepo","rs","removeRepo","filter","r","useSelectedRepos","config","Provider","Apollo","cache","InMemoryCache","link","HttpLink","uri","headers","authorization","client","ApolloClient","useTailwind","styleSheet","Object","entries","styles","Array","isArray","join","Layout","container","className","USER_REPOS","gql","RepoList","onRepoClick","removable","imageContainer","removeOverlay","removeIcon","image","text","TransitionGroup","CSSTransition","timeout","classNames","onClick","src","avatarUrl","alt","RepoPicker","onChoose","useQuery","data","rest","viewer","repositories","nodes","useUserRepos","loading","error","e","preventDefault","length","TokenGate","form","input","button","href","target","rel","onSubmit","type","onChange","placeholder","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.a62a471b.chunk.js","sourcesContent":["import { useEffect, useState, useRef } from 'react';\n\nconst serialize = obj => JSON.stringify(obj);\nconst deserialze = str => JSON.parse(str);\n\nconst loadState = (key, initial) => {\n  const stored = localStorage.getItem(key);\n\n  return stored ? deserialze(stored) : initial;\n};\n\nconst saveState = (key, value) => localStorage.setItem(key, serialize(value));\n\nexport const useRememberedState = (name, initial) => {\n  const key = useRef(name);\n\n  const [state, setState] = useState(() => loadState(key.current, initial));\n\n  useEffect(() => {\n    saveState(key.current, state);\n  }, [state]);\n\n  return [state, setState];\n};\n","export const ConfigKeys = {\n  AUTH: 'AUTH',\n  SELECTED_REPOS: 'SELECTED_REPOS',\n};\n","import React, { createContext, useContext, useMemo } from 'react';\nimport { useSelectedRepos } from './useSelectedRepos';\nimport { useAuth } from './useAuth';\n\nconst ConfigContext = createContext();\n\nexport const useConfig = () => useContext(ConfigContext);\n\nexport const ConfigController = ({ children }) => {\n  const auth = useAuth();\n  const selectedRepos = useSelectedRepos();\n\n  const config = useMemo(() => ({ auth, selectedRepos }), [\n    auth,\n    selectedRepos,\n  ]);\n\n  return (\n    <ConfigContext.Provider value={config}>{children}</ConfigContext.Provider>\n  );\n};\n","import { ConfigKeys } from './ConfigKeys';\nimport { useRememberedState } from '../../hooks/useRememberedState';\nimport { useMemo } from 'react';\n\nexport const useAuth = () => {\n  const [token, setToken] = useRememberedState(ConfigKeys.AUTH, '');\n\n  return useMemo(\n    () => ({\n      token,\n      setToken,\n    }),\n    [token, setToken],\n  );\n};\n","import { useMemo } from 'react';\nimport { useRememberedState } from '../../hooks/useRememberedState';\nimport { ConfigKeys } from './ConfigKeys';\nimport { mapToGroups } from '../../helpers/mapToGroups';\n\nexport const useSelectedRepos = () => {\n  const [repos, setRepos] = useRememberedState(ConfigKeys.SELECTED_REPOS, []);\n\n  const groupedRepos = useMemo(\n    () => mapToGroups(repos, repo => repo.owner.login),\n    [repos],\n  );\n\n  const repoKeys = useMemo(() => repos.map(repo => repo.nameWithOwner), [\n    repos,\n  ]);\n\n  return useMemo(\n    () => ({\n      repos,\n      groupedRepos,\n      repoKeys,\n\n      containsRepo(repo) {\n        return repoKeys.includes(repo.nameWithOwner);\n      },\n\n      addRepo(repo) {\n        setRepos(rs => [...rs, repo]);\n      },\n\n      removeRepo(repo) {\n        setRepos(rs => rs.filter(r => r.nameWithOwner !== repo.nameWithOwner));\n      },\n    }),\n    [repos, groupedRepos, repoKeys, setRepos],\n  );\n};\n","export const mapToGroups = (arr, keyGetter) =>\n  arr.reduce((acc, item, index) => {\n    const key = keyGetter(item, index);\n\n    if (acc[key]) {\n      acc[key].push(item);\n    } else {\n      acc[key] = [item];\n    }\n\n    return acc;\n  }, {});\n","import React, { useMemo } from 'react';\nimport { ApolloClient, InMemoryCache, HttpLink } from 'apollo-boost';\nimport { ApolloProvider } from '@apollo/react-hooks';\nimport { useConfig } from './components/ConfigController/ConfigController';\n\nexport const Apollo = ({ children }) => {\n  const {\n    auth: { token },\n  } = useConfig();\n\n  const cache = useMemo(() => new InMemoryCache(), []);\n  const link = useMemo(\n    () =>\n      new HttpLink({\n        uri: 'https://api.github.com/graphql',\n        headers: {\n          authorization: `bearer ${token}`,\n        },\n      }),\n    [token],\n  );\n\n  const client = useMemo(() => new ApolloClient({ link, cache }), [\n    link,\n    cache,\n  ]);\n\n  return <ApolloProvider client={client}>{children}</ApolloProvider>;\n};\n","import { useMemo } from 'react';\n\nexport const useTailwind = styleSheet => {\n  return useMemo(() => {\n    return Object.entries(styleSheet).reduce((acc, [key, styles]) => {\n      acc[key] = Array.isArray(styles) ? styles.join(' ') : styles;\n\n      return acc;\n    }, {});\n  }, [styleSheet]);\n};\n","import React from 'react';\nimport { useStyles } from './Layout.styles';\n\nexport const Layout = ({ children }) => {\n  const styles = useStyles();\n\n  return <div className={styles.container}>{children}</div>;\n};\n","import { useTailwind } from '../hooks/useTailwind';\n\nexport const useStyles = () =>\n  useTailwind({\n    container: `\n      px-8 max-w-5xl mx-auto h-full\n    `,\n  });\n","import { gql } from 'apollo-boost';\nimport { useQuery } from '@apollo/react-hooks';\n\nconst USER_REPOS = gql`\n  {\n    viewer {\n      repositories(\n        first: 12\n        affiliations: [OWNER, ORGANIZATION_MEMBER, COLLABORATOR]\n        ownerAffiliations: [OWNER, ORGANIZATION_MEMBER, COLLABORATOR]\n        orderBy: { field: UPDATED_AT, direction: DESC }\n      ) {\n        nodes {\n          name\n          nameWithOwner\n          owner {\n            login\n            avatarUrl\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport const useUserRepos = () => {\n  const { data, ...rest } = useQuery(USER_REPOS);\n\n  return {\n    data,\n    repos: data ? data.viewer.repositories.nodes : null,\n    ...rest,\n  };\n};\n","import React from 'react';\nimport { TransitionGroup, CSSTransition } from 'react-transition-group';\nimport { useStyles } from './RepoList.styles';\n\nimport './RepoList.css';\n\nexport const RepoList = ({ repos, onRepoClick = null, removable = false }) => {\n  const styles = useStyles();\n\n  return (\n    <TransitionGroup className={styles.repos}>\n      {repos.map(repo => (\n        <CSSTransition key={repo.nameWithOwner} timeout={200} classNames=\"item\">\n          <button\n            className={styles.repo}\n            onClick={onRepoClick ? onRepoClick(repo) : null}\n          >\n            <div className={styles.imageContainer}>\n              <img\n                src={repo.owner.avatarUrl}\n                className={styles.image}\n                alt={repo.nameWithOwner}\n              />\n\n              {removable ? (\n                <div className={styles.removeOverlay}>\n                  <p className={styles.removeIcon}>✕</p>\n                </div>\n              ) : null}\n            </div>\n            <p className={styles.text}>{repo.nameWithOwner}</p>\n          </button>\n        </CSSTransition>\n      ))}\n    </TransitionGroup>\n  );\n};\n","import { useTailwind } from '../hooks/useTailwind';\n\nexport const useStyles = () =>\n  useTailwind({\n    repos: `\n        flex flex-row items-center justify-center flex-wrap\n    `,\n\n    repo: `\n        bg-gray-400 inline-block whitespace-no-wrap\n        m-1 rounded-full p-1 pr-3\n        flex flex-row items-center\n        text-gray-800\n\n        hover:bg-gray-500\n        focus:outline-none\n        focus:bg-purple-300\n\n        focus:text-purple-800\n    `,\n\n    imageContainer: `\n        relative mr-2 rounded-full overflow-hidden\n    `,\n\n    removeOverlay: `\n        absolute top-0 bottom-0 right-0 left-0\n        bg-gray-600\n        flex items-center justify-center\n        opacity-75\n    `,\n\n    removeIcon: 'text-gray-200 text-xs leading-none',\n\n    image: `\n        w-6 h-6\n    `,\n\n    text: `\n        text-sm leading-none font-semibold\n    `,\n  });\n","import React from 'react';\nimport { useUserRepos } from '../hooks/queries/useUserRepos';\n\nimport { useConfig } from './ConfigController/ConfigController';\nimport { RepoList } from './RepoList';\nimport { useStyles } from './RepoPicker.styles';\n\nexport const RepoPicker = ({ onChoose }) => {\n  const { loading, repos, error } = useUserRepos();\n  const { selectedRepos } = useConfig();\n  const styles = useStyles();\n\n  const handleChoose = repo => e => {\n    e.preventDefault();\n\n    selectedRepos.addRepo(repo);\n  };\n\n  const removeRepo = repo => e => {\n    e.preventDefault();\n\n    selectedRepos.removeRepo(repo);\n  };\n\n  return (\n    <div className={styles.container}>\n      <p className={styles.text}>\n        Get started by picking some repos you want to see:\n      </p>\n      {loading ? (\n        <p>Loading...</p>\n      ) : error ? (\n        <p>something went wrong...</p>\n      ) : (\n        <>\n          <RepoList\n            repos={repos.filter(r => !selectedRepos.containsRepo(r))}\n            onRepoClick={handleChoose}\n          />\n\n          {selectedRepos.repos.length > 0 ? (\n            <>\n              <p className={styles.text}>Selected:</p>\n              <RepoList\n                repos={selectedRepos.repos}\n                onRepoClick={removeRepo}\n                removable\n              />\n            </>\n          ) : null}\n        </>\n      )}\n    </div>\n  );\n};\n","import { useTailwind } from '../hooks/useTailwind';\n\nexport const useStyles = () =>\n  useTailwind({\n    text: `\n        mb-2 mt-4 text-gray-900 font-light\n    `,\n  });\n","import React, { useState } from 'react';\nimport { useConfig } from './ConfigController/ConfigController';\nimport { useStyles } from './TokenGate.styles';\n\nexport const TokenGate = ({ children }) => {\n  const { auth } = useConfig();\n  const styles = useStyles();\n\n  const [token, setToken] = useState('');\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    auth.setToken(token);\n  };\n\n  return auth.token ? (\n    children\n  ) : (\n    <div className={styles.container}>\n      <p className={styles.text}>\n        Welcome! Before you can get started, you need to supply us with a\n        Personal Access Token so we can see your repositories.\n        <br />\n        <a\n          href=\"https://github.com/settings/tokens/new?scopes=repo&description=git-dash\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          className={styles.link}\n        >\n          Click here to generate one on Github.\n        </a>\n      </p>\n\n      <form onSubmit={handleSubmit} className={styles.form}>\n        <input\n          type=\"text\"\n          value={token}\n          onChange={e => setToken(e.target.value)}\n          placeholder=\"Paste PAT Here\"\n          className={styles.input}\n        />\n\n        <button type=\"submit\" className={styles.button}>\n          Go\n        </button>\n      </form>\n    </div>\n  );\n};\n","import { useTailwind } from '../hooks/useTailwind';\n\nexport const useStyles = () =>\n  useTailwind({\n    container: `\n        flex flex-col items-center justify-center h-full\n    `,\n\n    text: `\n        text-center max-w-md\n        text-gray-800 mb-4\n    `,\n\n    link: `\n        text-purple-600 font-semibold\n    `,\n\n    form: `\n        shadow-lg rounded\n    `,\n\n    input: `\n        w-56 h-12 px-4 rounded-l\n        border border-gray-400 border-r-0\n        focus:outline-none\n        focus:border-purple-600\n    `,\n\n    button: `\n        h-12 px-4 bg-purple-600 text-purple-100 rounded-r\n        border border-purple-800 border-l-0\n    `,\n  });\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { App } from './App';\n\nimport './styles.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n","import React from 'react';\nimport { Apollo } from './Apollo';\n// import { Test } from './Test';\nimport { Layout } from './components/Layout';\nimport { RepoPicker } from './components/RepoPicker';\nimport { ConfigController } from './components/ConfigController/ConfigController';\nimport { TokenGate } from './components/TokenGate';\n\nconst token = '514efa1c3afb28538a89d74a2d19ce9ef789baea';\n\nexport const App = () => {\n  return (\n    <ConfigController>\n      <Layout>\n        <TokenGate>\n          <Apollo token={token}>\n            <RepoPicker />\n            {/* <Test /> */}\n          </Apollo>\n        </TokenGate>\n      </Layout>\n    </ConfigController>\n  );\n};\n"],"sourceRoot":""}